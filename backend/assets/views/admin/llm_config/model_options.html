<!-- Model Options Partial - Dynamically loaded via HTMX -->
{% if error %}
<!-- Error: show text input for manual entry -->
<input type="text" id="model_name" name="model_name"
    value="{{ current_model | default(value='') }}" required
    class="flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm font-mono
           placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"
    placeholder="e.g., llama3.1:latest, codellama:13b" />
<p class="text-xs text-muted-foreground text-amber-600 mt-1">
    {{ error }}. Enter model name manually.
</p>
{% elif available_models | length > 0 %}
<!-- Success: show select dropdown -->
<select id="model_name" name="model_name" required
    class="flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm font-mono
           focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring">
    <option value="">Select model...</option>
    {% for model in available_models %}
    <option value="{{ model.name }}" {% if model.name == current_model %}selected{% endif %}>{{ model.name }}{% if model.details and model.details.parameter_size %} ({{ model.details.parameter_size }}){% endif %}</option>
    {% endfor %}
</select>
<p class="text-xs text-muted-foreground mt-1">
    Found {{ available_models | length }} model(s) on the server.
</p>
{% else %}
<!-- No models found: show text input -->
<input type="text" id="model_name" name="model_name"
    value="{{ current_model | default(value='') }}" required
    class="flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm font-mono
           placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"
    placeholder="e.g., llama3.1:latest, codellama:13b" />
<p class="text-xs text-muted-foreground mt-1">
    Enter the endpoint URL above to fetch available models.
</p>
{% endif %}
