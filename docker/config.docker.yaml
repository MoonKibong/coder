# Loco configuration for Docker all-in-one environment

# Application logging configuration
logger:
  enable: true
  pretty_backtrace: true
  level: info
  format: compact
  override_filter: info

# Web server configuration
server:
  port: 3000
  # Bind to all interfaces for Docker
  binding: 0.0.0.0
  host: http://localhost
  middlewares:
    static:
      enable: true
      must_exist: true
      precompressed: false
      folder:
        uri: "/static"
        path: "assets/static"
      fallback: "assets/static/404.html"

# Worker Configuration
workers:
  mode: BackgroundAsync

# Mailer Configuration (disabled for Docker)
mailer:
  smtp:
    enable: false
    host: localhost
    port: 1025
    secure: false

# Database Configuration
database:
  uri: {{ get_env(name="DATABASE_URL", default="postgres://coder:coder_password@localhost:5432/coder_development") }}
  enable_logging: false
  connect_timeout: {{ get_env(name="DB_CONNECT_TIMEOUT", default="5000") }}
  idle_timeout: {{ get_env(name="DB_IDLE_TIMEOUT", default="5000") }}
  min_connections: {{ get_env(name="DB_MIN_CONNECTIONS", default="1") }}
  max_connections: {{ get_env(name="DB_MAX_CONNECTIONS", default="5") }}
  auto_migrate: true
  dangerously_truncate: false
  dangerously_recreate: false

# Authentication Configuration
auth:
  jwt:
    secret: {{ get_env(name="JWT_SECRET", default="DockerSecretKey2025ChangeInProduction") }}
    expiration: 604800 # 7 days
